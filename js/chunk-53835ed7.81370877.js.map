{"version":3,"sources":["webpack:///./src/views/category/category-content.vue?4525","webpack:///./src/views/category/category.vue?eff4","webpack:///./src/views/category/category-tab.vue?c23d","webpack:///./src/views/category/category.vue?0a68","webpack:///./src/network/category.js","webpack:///./src/views/category/category-topbar.vue?29a4","webpack:///src/views/category/category-topbar.vue","webpack:///./src/views/category/category-topbar.vue?7ee8","webpack:///./src/views/category/category-topbar.vue","webpack:///./src/views/category/category-tab.vue?045a","webpack:///./src/views/category/config.js","webpack:///src/views/category/category-tab.vue","webpack:///./src/views/category/category-tab.vue?3b22","webpack:///./src/views/category/category-tab.vue?8173","webpack:///./src/views/category/category-content.vue?068c","webpack:///./src/network/config.js","webpack:///./src/network/storage.js","webpack:///src/views/category/category-content.vue","webpack:///./src/views/category/category-content.vue?8ff2","webpack:///./src/views/category/category-content.vue?cbbc","webpack:///src/views/category/category.vue","webpack:///./src/views/category/category.vue?0e41","webpack:///./src/views/category/category.vue?3b1b"],"names":["cancel","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticRenderFns","title","backColor","color","name","data","components","topbar","component","_l","item","index","key","class","isActive","on","$event","switchTab","id","_v","_s","prefix","suffix","CATEGORY_CONTENT_KEY","CATEGORY_CONTENT_UPDATE_TIME_INTERVAL","categoryNames","tabItems","activeTab","categoryScroll","created","getTabItems","mounted","methods","$bus","$emit","directives","rawName","value","expression","imgWidth","imgHeight","ref","bannerList","linkUrl","picUrl","content","scrollRefresh","SUCC_CODE","getCategoryContent","newAxios","cancelToken","CancelToken","c","then","res","code","Error","catch","err","isCancel","console","log","storage","window","localStorage","set","val","undefined","setItem","serialize","get","def","deserialize","getItem","remove","removeItem","clear","JSON","stringify","parse","e","titleList","contentList","loaded","categoryLoading","getTabId","$on","getContent","contents","updateTime","getContentByLocalStorage","getContentByHttp","Promise","resolve","banner","updateLocalStorage","$refs","scroll","backTop","scrollTo","y","categoryTopbar","categoryTab","categoryContent"],"mappings":"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","file":"js/chunk-53835ed7.81370877.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-content.vue?vue&type=style&index=0&id=c6bf4a18&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-content.vue?vue&type=style&index=0&id=c6bf4a18&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=style&index=0&id=757aa2f2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=style&index=0&id=757aa2f2&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-tab.vue?vue&type=style&index=0&id=d7aa6242&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-tab.vue?vue&type=style&index=0&id=d7aa6242&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"category\"}},[_c('category-topbar'),_c('div',{staticClass:\"category-contaner\"},[_c('div',{staticClass:\"category-tab-container\"},[_c('category-tab')],1),_c('div',{staticClass:\"category-content-container\"},[_c('category-content')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { newAxios, CancelToken, isCancel } from './axios'\r\nimport { SUCC_CODE } from './config'\r\n\r\nlet cancel\r\n\r\n// 获取内容数据--axios\r\nexport const getCategoryContent = (id) => {\r\n  cancel && cancel('取消了前一次的请求！')\r\n  cancel = null\r\n  return newAxios(id, {\r\n    cancelToken: new CancelToken(function executor (c) {\r\n      cancel = c\r\n    })\r\n  }).then(res => {\r\n    if (res.data.code === SUCC_CODE) {\r\n      return res.data.content\r\n    }\r\n\r\n    throw new Error('没有成功获取到数据！')\r\n  }).catch(err => {\r\n    // console.log(err)\r\n    // 判断是否取消了前一次的请求\r\n    if (isCancel(err)) {\r\n      console.log(err)\r\n    } else {\r\n      // handle error\r\n      console.log(err)\r\n    }\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('topbar',{attrs:{\"title\":_vm.title,\"backColor\":_vm.backColor,\"color\":_vm.color}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <topbar :title=\"title\" :backColor=\"backColor\" :color=\"color\"></topbar>\r\n</template>\r\n\r\n<script>\r\nimport topbar from 'components/common/topbar/topbar'\r\n\r\nexport default {\r\n  name: 'categoryTopbar',\r\n  data () {\r\n    return {\r\n      title: '分类',\r\n      color: '#fff',\r\n      backColor: 'rgb(222, 24, 27)'\r\n    }\r\n  },\r\n  components: {\r\n    topbar\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-topbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-topbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./category-topbar.vue?vue&type=template&id=e3c62110&scoped=true&\"\nimport script from \"./category-topbar.vue?vue&type=script&lang=js&\"\nexport * from \"./category-topbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3c62110\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"category-tab\"},[_c('category-scroll',{staticClass:\"category-scroll\"},_vm._l((_vm.tabItems),function(item,index){return _c('div',{key:item.index,staticClass:\"tab-item\",class:{'tab-item-active': _vm.isActive === index},on:{\"click\":function($event){return _vm.switchTab(index,item.id)}}},[_c('p',{staticClass:\"tab-name\"},[_vm._v(_vm._s(item.name))])])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const prefix = 'category';\r\nconst suffix = 'key';\r\nexport const CATEGORY_CONTENT_KEY = `${prefix}-content-${suffix}`;\r\nexport const CATEGORY_CONTENT_UPDATE_TIME_INTERVAL = 1 * 60 * 60 * 1000;\r\n\r\n// 分类页tab数组\r\nexport const categoryNames = [\r\n  {\r\n    'name': '热门推荐',\r\n    'id': 'WQR2006'\r\n  },\r\n  {\r\n    'name': '精选超市',\r\n    'id': 'WQ1968'\r\n  },\r\n  {\r\n    'name': '国际名牌',\r\n    'id': 'WQ1969'\r\n  },\r\n  {\r\n    'name': '奢侈品',\r\n    'id': 'WQ1970'\r\n  },\r\n  {\r\n    'name': '全球购',\r\n    'id': 'WQ1971'\r\n  },\r\n  {\r\n    'name': '男装',\r\n    'id': 'WQ1972'\r\n  },\r\n  {\r\n    'name': '女装',\r\n    'id': 'WQ1973'\r\n  },\r\n  {\r\n    'name': '男鞋',\r\n    'id': 'WQ1974'\r\n  },\r\n  {\r\n    'name': '女鞋',\r\n    'id': 'WQ1975'\r\n  },\r\n  {\r\n    'name': '箱包手袋',\r\n    'id': 'WQ1977'\r\n  },\r\n  {\r\n    'name': '钟表珠宝',\r\n    'id': 'WQ1979'\r\n  },\r\n  {\r\n    'name': '手机数码',\r\n    'id': 'WQ1980'\r\n  },\r\n  {\r\n    'name': '电脑办公',\r\n    'id': 'WQ1981'\r\n  },\r\n  {\r\n    'name': '家用电器',\r\n    'id': 'WQ1982'\r\n  },\r\n  {\r\n    'name': '食品生鲜',\r\n    'id': 'WQ1983'\r\n  },\r\n  {\r\n    'name': '酒水饮料',\r\n    'id': 'WQ1984'\r\n  },\r\n  {\r\n    'name': '母婴童鞋',\r\n    'id': 'WQ1985'\r\n  },\r\n  {\r\n    'name': '玩具乐器',\r\n    'id': 'WQ1986'\r\n  },\r\n  {\r\n    'name': '医药保健',\r\n    'id': 'WQ1987'\r\n  },\r\n  {\r\n    'name': '计生情趣',\r\n    'id': 'WQ1988'\r\n  },\r\n  {\r\n    'name': '运动户外',\r\n    'id': 'WQ1989'\r\n  },\r\n  {\r\n    'name': '家居厨具',\r\n    'id': 'WQ1991'\r\n  },\r\n  {\r\n    'name': '礼品鲜花',\r\n    'id': 'WQ1993'\r\n  },\r\n  {\r\n    'name': '宠物生活',\r\n    'id': 'WQ1994'\r\n  },\r\n  {\r\n    'name': '生活旅行',\r\n    'id': 'WQ1995'\r\n  },\r\n  {\r\n    'name': '邮币',\r\n    'id': 'WQ1997'\r\n  },\r\n  {\r\n    'name': '农资绿植',\r\n    'id': 'WQ1998'\r\n  },\r\n  {\r\n    'name': '金融',\r\n    'id': 'WQ2000'\r\n  },\r\n  {\r\n    'name': '拍卖',\r\n    'id': 'WQ2001'\r\n  },\r\n  {\r\n    'name': '房产',\r\n    'id': 'WQ2008'\r\n  },\r\n  {\r\n    'name': '二手商品',\r\n    'id': 'WQ2002'\r\n  }\r\n]\r\n","<template>\r\n  <div class=\"category-tab\">\r\n    <category-scroll class=\"category-scroll\">\r\n      <div class=\"tab-item\"\r\n      :class=\"{'tab-item-active': isActive === index}\"\r\n      v-for=\"(item, index) in tabItems\" :key=\"item.index\"\r\n      @click=\"switchTab(index,item.id)\"\r\n      >\r\n        <p class=\"tab-name\">{{item.name}}</p>\r\n      </div>\r\n    </category-scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport categoryScroll from 'components/common/scroll/scroll'\r\n\r\nimport { categoryNames } from './config'\r\n\r\nexport default {\r\n  name: 'categoryTab',\r\n  data () {\r\n    return {\r\n      tabItems: [],\r\n      isActive: 0,\r\n      activeTab: ''\r\n    }\r\n  },\r\n  components: {\r\n    categoryScroll\r\n  },\r\n  created () {\r\n    this.getTabItems()\r\n    this.switchTab(0, this.tabItems[0].id)\r\n  },\r\n  mounted () {\r\n    this.switchTab(0, this.tabItems[0].id)\r\n  },\r\n  methods: {\r\n    getTabItems () {\r\n      this.tabItems = categoryNames\r\n    },\r\n    switchTab (index, id) {\r\n      this.isActive = index\r\n      this.$bus.$emit('switch-tab', id)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-scroll{\r\n  width: 4rem !important;\r\n  height: calc(100vh - 4.7rem);\r\n}\r\n\r\n.category-tab{\r\n  width: 4rem;\r\n  height: 100%;\r\n  border: 1px solid #eee;\r\n  padding-top: 2.2rem;\r\n  position: relative;\r\n  z-index: 3;\r\n}\r\n.tab-item{\r\n  width: 4rem;\r\n  padding: .5rem;\r\n  text-align: center;\r\n  font-size: .7rem;\r\n  font-weight: bold;\r\n  border-bottom: 1px solid #999;\r\n}\r\n.tab-item-active{\r\n  color: #f23030;\r\n  background-color: #f6f6f6;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-tab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-tab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./category-tab.vue?vue&type=template&id=d7aa6242&scoped=true&\"\nimport script from \"./category-tab.vue?vue&type=script&lang=js&\"\nexport * from \"./category-tab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./category-tab.vue?vue&type=style&index=0&id=d7aa6242&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d7aa6242\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"category-left-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"category-loading\"},[_c('category-loading',{staticClass:\"loading\",attrs:{\"imgWidth\":_vm.imgWidth,\"imgHeight\":_vm.imgHeight}})],1),_c('keep-alive',[_c('div',{staticClass:\"category-content\"},[_c('category-scroll',{ref:\"scroll\",staticClass:\"category-scroll\"},[_c('div',{staticClass:\"category-banner\"},[_c('a',{staticClass:\"banner-link\",attrs:{\"href\":_vm.bannerList.linkUrl}},[_c('img',{staticClass:\"banner-image\",attrs:{\"src\":_vm.bannerList.picUrl}})])]),_c('div',{staticClass:\"category-part\"},_vm._l((_vm.titleList),function(item){return _c('div',{key:item.id,staticClass:\"part-item-container\"},[_c('p',{staticClass:\"part-item-title\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"part-item\"},_vm._l((item.itemList),function(content){return _c('div',{key:content.id,staticClass:\"part-item-content\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(content.picUrl),expression:\"content.picUrl\"}],staticClass:\"part-item-img\",on:{\"load\":_vm.scrollRefresh}}),_c('p',{staticClass:\"part-item-text text-ellipsis\"},[_vm._v(_vm._s(content.name))])])}),0)])}),0)])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const SUCC_CODE = 0\r\n\r\nexport const TIMEOUT = 10000\r\n\r\nexport const HOME_RECOMMEND_PAGE_SIZE = 20\r\n\r\nexport const jsonpOptions = {\r\n  param: 'callback',\r\n  timeout: TIMEOUT\r\n}\r\n","const storage = window.localStorage\r\n\r\nexport default {\r\n  set (key, val) {\r\n    if (val === undefined) {\r\n      return\r\n    }\r\n    storage.setItem(key, serialize(val))\r\n  },\r\n  get (key, def) {\r\n    const val = deserialize(storage.getItem(key))\r\n    return val === undefined ? def : val\r\n  },\r\n  remove (key) {\r\n    storage.removeItem(key)\r\n  },\r\n  clear () {\r\n    storage.clear()\r\n  }\r\n}\r\n\r\nfunction serialize (val) {\r\n  return JSON.stringify(val)\r\n}\r\n\r\nfunction deserialize (val) {\r\n  if (typeof val !== 'string') {\r\n    return undefined\r\n  }\r\n  try {\r\n    return JSON.parse(val)\r\n  } catch (e) {\r\n    return val || undefined\r\n  }\r\n}\r\n","<template>\r\n<div class=\"category-left-content\">\r\n  <div class=\"category-loading\" v-show=\"loaded\">\r\n    <category-loading class=\"loading\" :imgWidth=\"imgWidth\" :imgHeight=\"imgHeight\"/>\r\n  </div>\r\n  <keep-alive>\r\n    <div class=\"category-content\">\r\n      <category-scroll class=\"category-scroll\" ref=\"scroll\">\r\n        <div class=\"category-banner\">\r\n          <a :href=\"bannerList.linkUrl\" class=\"banner-link\">\r\n            <img :src=\"bannerList.picUrl\" class=\"banner-image\">\r\n          </a>\r\n        </div>\r\n        <div class=\"category-part\">\r\n          <div class=\"part-item-container\" v-for=\"item in titleList\" :key=\"item.id\">\r\n            <p class=\"part-item-title\">{{item.name}}</p>\r\n            <div class=\"part-item\">\r\n              <div class=\"part-item-content\" v-for=\"content in item.itemList\" :key=\"content.id\">\r\n                <img v-lazy=\"content.picUrl\" class=\"part-item-img\" @load=\"scrollRefresh\">\r\n                <p class=\"part-item-text text-ellipsis\">{{content.name}}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </category-scroll>\r\n    </div>\r\n  </keep-alive>\r\n</div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport categoryScroll from 'components/common/scroll/scroll'\r\nimport categoryLoading from 'components/common/loading'\r\n\r\nimport { getCategoryContent } from 'network/category'\r\nimport storage from 'network/storage'\r\nimport { CATEGORY_CONTENT_KEY, CATEGORY_CONTENT_UPDATE_TIME_INTERVAL } from './config'\r\n\r\nexport default {\r\n  name: 'categoryContent',\r\n  data () {\r\n    return {\r\n      bannerList: {},\r\n      titleList: [],\r\n      contentList: [],\r\n      loaded: false,\r\n      imgWidth: '1rem',\r\n      imgHeight: '.5rem'\r\n    }\r\n  },\r\n  components: {\r\n    categoryScroll,\r\n    categoryLoading\r\n  },\r\n  created () {\r\n    this.getTabId()\r\n  },\r\n  methods: {\r\n    getTabId () {\r\n      this.$bus.$on('switch-tab', (id) => {\r\n        // 点击tab后加载中图标出现\r\n        this.loaded = true\r\n        this.getContent(id).then(() => {\r\n          // 数据加载之后消失\r\n          this.loaded = false\r\n          // 每次点击tab后，页面都回到最顶部\r\n          this.backTop(0)\r\n        })\r\n      })\r\n    },\r\n    // 需求：第一次向服务器请求数据，在规定的时间间隔内使用缓存获取分类页的数据，超过时间间隔重新向服务器请求数据\r\n    getContent (id) {\r\n      // 1.在storage中自定义一个对象，之后相关的数据都会存放进这个对象中\r\n      const contents = storage.get(CATEGORY_CONTENT_KEY)\r\n      const curTime = new Date().getTime()\r\n      let updateTime\r\n      // 2.如果已经存在这个对象并且存在当前id的对象，判断现在的时间距离上次更新的时间，有没有超过规定的时间间隔。\r\n      if (contents && contents[id]) {\r\n        updateTime = contents[id].updateTime || 0\r\n        // 2.1如果没有超过，就直接调用缓存的数据\r\n        if ((curTime - updateTime) <= CATEGORY_CONTENT_UPDATE_TIME_INTERVAL) {\r\n          // console.log('------')\r\n          return this.getContentByLocalStorage(contents[id])\r\n        // 2.2如果超过了，重新请求数据\r\n        } else {\r\n          // console.log('++++++')\r\n          return this.getContentByHttp(id).then(res => {\r\n            this.updateLocalStorage(contents, res, id, curTime)\r\n          })\r\n        }\r\n      // 3.如果不存在当前id的对象，新创建一个放进去\r\n      } else {\r\n        // console.log('~~~~~')\r\n        return this.getContentByHttp(id).then(res => {\r\n          this.updateLocalStorage(contents, res, id, curTime)\r\n        })\r\n      }\r\n    },\r\n    getContentByHttp (id) {\r\n      return getCategoryContent(id).then(data => {\r\n        return new Promise(resolve => {\r\n          if (data) {\r\n            // 获取分类页banner图数据\r\n            this.bannerList = data.banner\r\n\r\n            // 获取分类页内容数据\r\n            this.titleList = data.data\r\n\r\n            resolve(data)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    getContentByLocalStorage (content) {\r\n      this.bannerList = content.data.banner\r\n      this.titleList = content.data.data\r\n\r\n      // 上面要链式调用，所有要返回Promise\r\n      return Promise.resolve()\r\n    },\r\n    updateLocalStorage (contents, data, id, curTime) {\r\n      contents = contents || {}\r\n      // 一开始contents不存在内容，要将内容设置进contents中，并赋值给CATEGORY_CONTENT_KEY，这样就可以在缓存中调用了\r\n      contents[id] = { data: data, updateTime: curTime }\r\n      storage.set(CATEGORY_CONTENT_KEY, contents)\r\n    },\r\n    scrollRefresh () {\r\n      this.$refs.scroll.scrollRefresh()\r\n    },\r\n    backTop (y) {\r\n      // scrollTo返回指定坐标位置\r\n      this.$refs.scroll.scrollTo(0, y)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-scroll{\r\n  position: absolute;\r\n  top: 2.8rem;\r\n  left: 4rem;\r\n  padding: .5rem;\r\n  width: calc(100vw - 4rem);\r\n  height: calc(100vh - 5.5rem);\r\n  min-width: 12rem;\r\n  max-width: 18rem;\r\n}\r\n.category-loading{\r\n  width: calc(100vw - 4rem);\r\n  height: 100vh;\r\n  position: absolute;\r\n  top: 0;\r\n  z-index: 3;\r\n  background-color: #f6f6f6;\r\n}\r\n.loading{\r\n  width: 6rem;\r\n  height: 4rem;\r\n  color: #fff;\r\n  padding: .5rem;\r\n  border-radius: .25rem;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: rgba(0, 0, 0, .5);\r\n}\r\n\r\n.category-left-content{\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.category-content{\r\n  width: 100%;\r\n  height: 100%;\r\n  flex: 1;\r\n}\r\n.category-banner{\r\n  width: 100%;\r\n  height: 5rem;\r\n}\r\n.banner-link,\r\n.banner-image{\r\n  display: inline-block;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.category-part{\r\n  margin-top: 1rem;\r\n}\r\n.part-item-container{\r\n  margin-bottom: 1rem;\r\n}\r\n.part-item-title{\r\n  color: #333;\r\n  font-size: .7rem;\r\n  font-weight: bold;\r\n}\r\n.part-item{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-top: .5rem;\r\n  background-color: #fff;\r\n}\r\n.part-item-content{\r\n  width: 33.333%;\r\n  height: 50%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: .5rem 1rem;\r\n}\r\n.part-item-link,\r\n.part-item-img{\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.part-item-text{\r\n  font-size: .6rem;\r\n  height: 100%;\r\n  line-height: 1.1;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: .5rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-content.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category-content.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./category-content.vue?vue&type=template&id=c6bf4a18&scoped=true&\"\nimport script from \"./category-content.vue?vue&type=script&lang=js&\"\nexport * from \"./category-content.vue?vue&type=script&lang=js&\"\nimport style0 from \"./category-content.vue?vue&type=style&index=0&id=c6bf4a18&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6bf4a18\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"category\">\r\n    <category-topbar/>\r\n    <div class=\"category-contaner\">\r\n      <div class=\"category-tab-container\">\r\n        <category-tab/>\r\n      </div>\r\n      <div class=\"category-content-container\">\r\n        <category-content/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { getCategoryContent } from 'network/category'\r\n\r\nimport categoryTopbar from './category-topbar'\r\nimport categoryTab from './category-tab'\r\nimport categoryContent from './category-content'\r\n\r\nexport default {\r\n  name: 'category',\r\n  data () {\r\n    return {\r\n    }\r\n  },\r\n  components: {\r\n    categoryTopbar,\r\n    categoryTab,\r\n    categoryContent\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#category{\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #f6f6f6;\r\n}\r\n.category-contaner{\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n}\r\n.category-tab-container{\r\n  width: 4rem;\r\n  background-color: #fff;\r\n}\r\n.category-content-container{\r\n  flex: 1;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./category.vue?vue&type=template&id=757aa2f2&scoped=true&\"\nimport script from \"./category.vue?vue&type=script&lang=js&\"\nexport * from \"./category.vue?vue&type=script&lang=js&\"\nimport style0 from \"./category.vue?vue&type=style&index=0&id=757aa2f2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"757aa2f2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}